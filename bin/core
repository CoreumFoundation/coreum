#!/bin/bash

set -e

# set current working dir to "build"
cd "$(dirname "${BASH_SOURCE[0]}")" || exit
cd ../build

# FIXME (wojciech): add hashing mechanism to build library so code is not compiled if nothing has been changed
# Chicken and egg problem, to build tool which downloads all the other ones (including go) we need go
# Assuming for now, that new developer entering the team will just install any go version available in the distro
# and than build tool will install the right one required by us
go build -o ../bin/core-build ./cmd

../bin/core-build "$@"
